var Q=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var r=(e,t,s)=>(Q(e,t,"read from private field"),s?s.call(e):t.get(e)),p=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},o=(e,t,s,i)=>(Q(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);var O=(e,t,s)=>(Q(e,t,"access private method"),s);import{r as z}from"./index-76fb7be0.js";import{j as ht}from"./jsx-runtime-ffb262ed.js";var et=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},G=typeof window>"u"||"Deno"in globalThis;function J(){}function Ut(e,t){return typeof e=="function"?e(t):e}function ct(e){return typeof e=="number"&&e>=0&&e!==1/0}function lt(e,t){return Math.max(e+(t||0)-Date.now(),0)}function qt(e,t){const{type:s="all",exact:i,fetchStatus:a,predicate:d,queryKey:v,stale:h}=e;if(v){if(i){if(t.queryHash!==ft(v,t.options))return!1}else if(!V(t.queryKey,v))return!1}if(s!=="all"){const b=t.isActive();if(s==="active"&&!b||s==="inactive"&&b)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||a&&a!==t.state.fetchStatus||d&&!d(t))}function Tt(e,t){const{exact:s,status:i,predicate:a,mutationKey:d}=e;if(d){if(!t.options.mutationKey)return!1;if(s){if(H(t.options.mutationKey)!==H(d))return!1}else if(!V(t.options.mutationKey,d))return!1}return!(i&&t.state.status!==i||a&&!a(t))}function ft(e,t){return((t==null?void 0:t.queryKeyHashFn)||H)(e)}function H(e){return JSON.stringify(e,(t,s)=>B(s)?Object.keys(s).sort().reduce((i,a)=>(i[a]=s[a],i),{}):s)}function V(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!V(e[s],t[s])):!1}function st(e,t){if(e===t)return e;const s=W(e)&&W(t);if(s||B(e)&&B(t)){const i=s?e:Object.keys(e),a=i.length,d=s?t:Object.keys(t),v=d.length,h=s?[]:{};let b=0;for(let F=0;F<v;F++){const y=s?F:d[F];!s&&e[y]===void 0&&t[y]===void 0&&i.includes(y)?(h[y]=void 0,b++):(h[y]=st(e[y],t[y]),h[y]===e[y]&&e[y]!==void 0&&b++)}return a===v&&b===a?e:h}return t}function Pt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function W(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function B(e){if(!_(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!_(s)||!s.hasOwnProperty("isPrototypeOf"))}function _(e){return Object.prototype.toString.call(e)==="[object Object]"}function dt(e){return new Promise(t=>{setTimeout(t,e)})}function yt(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?st(e,t):t}function At(e){return e}function Mt(e,t,s=0){const i=[...e,t];return s&&i.length>s?i.slice(1):i}function Lt(e,t,s=0){const i=[t,...e];return s&&i.length>s?i.slice(0,-1):i}var pt=Symbol(),U,g,M,X,mt=(X=class extends et{constructor(){super();p(this,U,void 0);p(this,g,void 0);p(this,M,void 0);o(this,M,t=>{if(!G&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){r(this,g)||this.setEventListener(r(this,M))}onUnsubscribe(){var t;this.hasListeners()||((t=r(this,g))==null||t.call(this),o(this,g,void 0))}setEventListener(t){var s;o(this,M,t),(s=r(this,g))==null||s.call(this),o(this,g,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){r(this,U)!==t&&(o(this,U,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof r(this,U)=="boolean"?r(this,U):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},U=new WeakMap,g=new WeakMap,M=new WeakMap,X),vt=new mt,L,j,x,Y,bt=(Y=class extends et{constructor(){super();p(this,L,!0);p(this,j,void 0);p(this,x,void 0);o(this,x,t=>{if(!G&&window.addEventListener){const s=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}}})}onSubscribe(){r(this,j)||this.setEventListener(r(this,x))}onUnsubscribe(){var t;this.hasListeners()||((t=r(this,j))==null||t.call(this),o(this,j,void 0))}setEventListener(t){var s;o(this,x,t),(s=r(this,j))==null||s.call(this),o(this,j,t(this.setOnline.bind(this)))}setOnline(t){r(this,L)!==t&&(o(this,L,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return r(this,L)}},L=new WeakMap,j=new WeakMap,x=new WeakMap,Y),it=new bt;function St(e){return Math.min(1e3*2**e,3e4)}function rt(e){return(e??"online")==="online"?it.isOnline():!0}var nt=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function N(e){return e instanceof nt}function Ft(e){let t=!1,s=0,i=!1,a,d,v;const h=new Promise((u,c)=>{d=u,v=c}),b=u=>{var c;i||(l(new nt(u)),(c=e.abort)==null||c.call(e))},F=()=>{t=!0},y=()=>{t=!1},P=()=>!vt.isFocused()||e.networkMode!=="always"&&!it.isOnline(),n=u=>{var c;i||(i=!0,(c=e.onSuccess)==null||c.call(e,u),a==null||a(),d(u))},l=u=>{var c;i||(i=!0,(c=e.onError)==null||c.call(e,u),a==null||a(),v(u))},R=()=>new Promise(u=>{var c;a=D=>{const A=i||!P();return A&&u(D),A},(c=e.onPause)==null||c.call(e)}).then(()=>{var u;a=void 0,i||(u=e.onContinue)==null||u.call(e)}),C=()=>{if(i)return;let u;try{u=e.fn()}catch(c){u=Promise.reject(c)}Promise.resolve(u).then(n).catch(c=>{var $;if(i)return;const D=e.retry??(G?0:3),A=e.retryDelay??St,ut=typeof A=="function"?A(s,c):A,ot=D===!0||typeof D=="number"&&s<D||typeof D=="function"&&D(s,c);if(t||!ot){l(c);return}s++,($=e.onFail)==null||$.call(e,s,c),dt(ut).then(()=>{if(P())return R()}).then(()=>{t?l(c):C()})})};return rt(e.networkMode)?C():R().then(C),{promise:h,cancel:b,continue:()=>(a==null?void 0:a())?h:Promise.resolve(),cancelRetry:F,continueRetry:y}}function wt(){let e=[],t=0,s=n=>{n()},i=n=>{n()},a=n=>setTimeout(n,0);const d=n=>{a=n},v=n=>{let l;t++;try{l=n()}finally{t--,t||F()}return l},h=n=>{t?e.push(n):a(()=>{s(n)})},b=n=>(...l)=>{h(()=>{n(...l)})},F=()=>{const n=e;e=[],n.length&&a(()=>{i(()=>{n.forEach(l=>{s(l)})})})};return{batch:v,batchCalls:b,schedule:h,setNotifyFunction:n=>{s=n},setBatchNotifyFunction:n=>{i=n},setScheduler:d}}var Ct=wt(),q,Z,Ot=(Z=class{constructor(){p(this,q,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ct(this.gcTime)&&o(this,q,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(G?1/0:5*60*1e3))}clearGcTimeout(){r(this,q)&&(clearTimeout(r(this,q)),o(this,q,void 0))}},q=new WeakMap,Z),K,k,S,m,f,I,T,w,E,tt,xt=(tt=class extends Ot{constructor(t){super();p(this,w);p(this,K,void 0);p(this,k,void 0);p(this,S,void 0);p(this,m,void 0);p(this,f,void 0);p(this,I,void 0);p(this,T,void 0);o(this,T,!1),o(this,I,t.defaultOptions),this.setOptions(t.options),o(this,f,[]),o(this,S,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,o(this,K,t.state||Rt(this.options)),this.state=r(this,K),this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...r(this,I),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!r(this,f).length&&this.state.fetchStatus==="idle"&&r(this,S).remove(this)}setData(t,s){const i=yt(this.state.data,t,this.options);return O(this,w,E).call(this,{data:i,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),i}setState(t,s){O(this,w,E).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var i,a;const s=(i=r(this,m))==null?void 0:i.promise;return(a=r(this,m))==null||a.cancel(t),s?s.then(J).catch(J):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(r(this,K))}isActive(){return r(this,f).some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?r(this,f).some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!lt(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=r(this,f).find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=r(this,m))==null||s.continue()}onOnline(){var s;const t=r(this,f).find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=r(this,m))==null||s.continue()}addObserver(t){r(this,f).includes(t)||(r(this,f).push(t),this.clearGcTimeout(),r(this,S).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){r(this,f).includes(t)&&(o(this,f,r(this,f).filter(s=>s!==t)),r(this,f).length||(r(this,m)&&(r(this,T)?r(this,m).cancel({revert:!0}):r(this,m).cancelRetry()),this.scheduleGc()),r(this,S).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return r(this,f).length}invalidate(){this.state.isInvalidated||O(this,w,E).call(this,{type:"invalidate"})}fetch(t,s){var F,y,P;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(r(this,m))return r(this,m).continueRetry(),r(this,m).promise}if(t&&this.setOptions(t),!this.options.queryFn){const n=r(this,f).find(l=>l.options.queryFn);n&&this.setOptions(n.options)}const i=new AbortController,a={queryKey:this.queryKey,meta:this.meta},d=n=>{Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(o(this,T,!0),i.signal)})};d(a);const v=()=>!this.options.queryFn||this.options.queryFn===pt?Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)):(o(this,T,!1),this.options.persister?this.options.persister(this.options.queryFn,a,this):this.options.queryFn(a)),h={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:v};d(h),(F=this.options.behavior)==null||F.onFetch(h,this),o(this,k,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&O(this,w,E).call(this,{type:"fetch",meta:(P=h.fetchOptions)==null?void 0:P.meta});const b=n=>{var l,R,C,u;N(n)&&n.silent||O(this,w,E).call(this,{type:"error",error:n}),N(n)||((R=(l=r(this,S).config).onError)==null||R.call(l,n,this),(u=(C=r(this,S).config).onSettled)==null||u.call(C,this.state.data,n,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return o(this,m,Ft({fn:h.fetchFn,abort:i.abort.bind(i),onSuccess:n=>{var l,R,C,u;if(n===void 0){b(new Error(`${this.queryHash} data is undefined`));return}this.setData(n),(R=(l=r(this,S).config).onSuccess)==null||R.call(l,n,this),(u=(C=r(this,S).config).onSettled)==null||u.call(C,n,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:b,onFail:(n,l)=>{O(this,w,E).call(this,{type:"failed",failureCount:n,error:l})},onPause:()=>{O(this,w,E).call(this,{type:"pause"})},onContinue:()=>{O(this,w,E).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode})),r(this,m).promise}},K=new WeakMap,k=new WeakMap,S=new WeakMap,m=new WeakMap,f=new WeakMap,I=new WeakMap,T=new WeakMap,w=new WeakSet,E=function(t){const s=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Et(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return N(a)&&a.revert&&r(this,k)?{...r(this,k),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=s(this.state),Ct.batch(()=>{r(this,f).forEach(i=>{i.onQueryUpdate()}),r(this,S).notify({query:this,type:"updated",action:t})})},tt);function Et(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rt(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Rt(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,i=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var at=z.createContext(void 0),Kt=e=>{const t=z.useContext(at);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},kt=({client:e,children:t})=>(z.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ht.jsx(at.Provider,{value:e,children:t}));export{xt as Q,Ot as R,et as S,rt as a,Tt as b,Ft as c,J as d,Lt as e,Mt as f,vt as g,ft as h,Ut as i,H as j,kt as k,Pt as l,qt as m,Ct as n,it as o,V as p,G as q,ct as r,pt as s,lt as t,Et as u,yt as v,Kt as w,At as x};
//# sourceMappingURL=QueryClientProvider-5f9a1569.js.map
