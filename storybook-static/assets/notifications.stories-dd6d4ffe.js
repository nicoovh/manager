import{j as s}from"./jsx-runtime-ffb262ed.js";import{u as B,K as F}from"./index-84e177bd.js";import{k as M,a as v}from"./index-e3fcfd8d.js";import{k as S,a as g}from"./index-47106ace.js";import{O as _}from"./ods-theme-typography-size-da089dcf.js";import{r as x,R as z}from"./index-76fb7be0.js";import{g as L}from"./_commonjsHelpers-de833af9.js";import"./index-da03a860.js";const I=e=>{let t;const n=new Set,o=(a,f)=>{const u=typeof a=="function"?a(t):a;if(!Object.is(u,t)){const c=t;t=f??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(l=>l(t,c))}},r=()=>t,h={setState:o,getState:r,getInitialState:()=>E,subscribe:a=>(n.add(a),()=>n.delete(a)),destroy:()=>{n.clear()}},E=t=e(o,r,h);return h},$=e=>e?I(e):I;var q={exports:{}},W={},P={exports:{}},k={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p=x;function K(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var U=typeof Object.is=="function"?Object.is:K,Y=p.useState,G=p.useEffect,H=p.useLayoutEffect,Z=p.useDebugValue;function J(e,t){var n=t(),o=Y({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return H(function(){r.value=n,r.getSnapshot=t,N(r)&&i({inst:r})},[e,n,t]),G(function(){return N(r)&&i({inst:r}),e(function(){N(r)&&i({inst:r})})},[e]),Z(n),n}function N(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!U(e,n)}catch{return!0}}function Q(e,t){return t()}var X=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q:J;k.useSyncExternalStore=p.useSyncExternalStore!==void 0?p.useSyncExternalStore:X;P.exports=k;var ee=P.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=x,te=ee;function ne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oe=typeof Object.is=="function"?Object.is:ne,re=te.useSyncExternalStore,ie=b.useRef,se=b.useEffect,ae=b.useMemo,ce=b.useDebugValue;W.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=ie(null);if(i.current===null){var d={hasValue:!1,value:null};i.current=d}else d=i.current;i=ae(function(){function h(c){if(!E){if(E=!0,a=c,c=o(c),r!==void 0&&d.hasValue){var l=d.value;if(r(l,c))return f=l}return f=c}if(l=f,oe(a,c))return l;var D=o(c);return r!==void 0&&r(l,D)?l:(a=c,f=D)}var E=!1,a,f,u=n===void 0?null:n;return[function(){return h(t())},u===null?void 0:function(){return h(u())}]},[t,n,o,r]);var m=re(e,i[0],i[1]);return se(function(){d.hasValue=!0,d.value=m},[m]),ce(m),m};q.exports=W;var ue=q.exports;const le=L(ue),{useDebugValue:de}=z,{useSyncExternalStoreWithSelector:fe}=le;const pe=e=>e;function me(e,t=pe,n){const o=fe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return de(o),o}const A=e=>{const t=typeof e=="function"?$(e):e,n=(o,r)=>me(t,o,r);return Object.assign(n,t),n},he=e=>e?A(e):A;var y=(e=>(e.Success="success",e.Error="error",e.Info="info",e.Warning="warning",e))(y||{});const j=he((e,t)=>({uid:0,notifications:[],addNotification:(n,o,r=!1)=>e(i=>({uid:i.uid+1,notifications:[...i.notifications,{uid:i.uid,content:n,type:o,dismissable:r}]})),addSuccess:(n,o=!1)=>t().addNotification(n,"success",o),addError:(n,o=!1)=>t().addNotification(n,"error",o),addWarning:(n,o=!1)=>t().addNotification(n,"warning",o),addInfo:(n,o=!1)=>t().addNotification(n,"info",o),clearNotification:n=>e(o=>({notifications:o.notifications.filter(({uid:r})=>r!==n)})),clearNotifications:()=>e(()=>({notifications:[]}))})),Se=e=>{switch(e){case y.Success:return S.success;case y.Error:return S.error;case y.Warning:return S.warning;case y.Info:return S.info;default:return S.info}};function w({notification:e}){const{clearNotification:t}=j();return s.jsx(M,{className:"mb-2",type:Se(e.type),...e.dismissable?{removable:!0,onOdsRemoveClick:()=>t(e.uid)}:{},children:e.content})}try{w.displayName="OdsNotification",w.__docgenInfo={description:"",displayName:"OdsNotification",props:{notification:{defaultValue:null,description:"",name:"notification",required:!0,type:{name:"Notification"}}}}}catch{}const R=({clearAfterRead:e=!0})=>{const t=B(),[n]=x.useState(t),{notifications:o,clearNotifications:r}=j();return x.useEffect(()=>{e&&n.pathname!==t.pathname&&r()},[e,t.pathname]),s.jsx(s.Fragment,{children:o.map(i=>s.jsx(w,{notification:i},i.uid))})};try{R.displayName="Notifications",R.__docgenInfo={description:`This component display the list of notifications. It acts
as a "flash" component because by default once the notifications have been
shown they are cleared. It means that you can use this component on multiple
pages, switching page won't display notifications twice.

It replicates the current behavior of public cloud notifications for
actions (success / errors / etc)`,displayName:"Notifications",props:{clearAfterRead:{defaultValue:{value:"true"},description:"Clear notifications once they have been displayed (on location changes)",name:"clearAfterRead",required:!1,type:{name:"boolean"}}}}}catch{}try{notificationscomponent.displayName="notificationscomponent",notificationscomponent.__docgenInfo={description:`This component display the list of notifications. It acts
as a "flash" component because by default once the notifications have been
shown they are cleared. It means that you can use this component on multiple
pages, switching page won't display notifications twice.

It replicates the current behavior of public cloud notifications for
actions (success / errors / etc)`,displayName:"notificationscomponent",props:{clearAfterRead:{defaultValue:{value:"true"},description:"Clear notifications once they have been displayed (on location changes)",name:"clearAfterRead",required:!1,type:{name:"boolean"}}}}}catch{}const ye=()=>{const{addSuccess:e,addWarning:t,addError:n,clearNotifications:o}=j();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex",children:[s.jsx(v,{className:"mr-2",size:g.md,color:_.success,onClick:()=>e("success message"),children:"Add success"}),s.jsx(v,{className:"mr-2",size:g.md,color:_.warning,onClick:()=>t("warning message"),children:"Add warning"}),s.jsx(v,{className:"mr-2",size:g.md,color:_.error,onClick:()=>n("error message"),children:"Add error"}),s.jsx(v,{className:"mr-2",size:g.md,color:_.primary,onClick:o,children:"Clear"})]}),s.jsx("div",{className:"mt-4",children:s.jsx(R,{})})]})},O={name:"Notifications"},we={title:"Components/Notifications",component:ye,decorators:[F]};var C,T,V;O.parameters={...O.parameters,docs:{...(C=O.parameters)==null?void 0:C.docs,source:{originalSource:`{
  name: 'Notifications'
}`,...(V=(T=O.parameters)==null?void 0:T.docs)==null?void 0:V.source}}};const Re=["Primary"];export{O as Primary,Re as __namedExportsOrder,we as default};
//# sourceMappingURL=notifications.stories-dd6d4ffe.js.map
